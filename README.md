### API трекера привычек
  #### Сервис готов к развертыванию на сервере с помощью docker:
  - Заменить значение servername в файле [docker/nginx/default.conf](https://github.com/DaniilMashkov/habits/blob/main/docker/nginx/default.conf) на собственное 
  - Клонировать репозиторий
  - Выполнить команду *docker-compose up -d --build*  
  ---
  Локальный запуск возможен в двух вариациях:
   - Заменить значение servername в файле [docker/nginx/default.conf](https://github.com/DaniilMashkov/habits/blob/main/docker/nginx/default.conf) на _ и выполнить команду *docker-compose up -d --build*; сервис будет доступен по адресу http://localhost/
   - Создать виртуальное окружение, установить зависимости, заполнить .env файл, создать БД postgres, применить миграции и запустить *python manage.py migrate -> python manage.py runserver* 
---
#### Регистрация и авторизация требуется для всех действий, кроме регистрации нового пользователя. Администратор имеет доступ ко всем пользователям и привычкам, обычный пользователь только к своему аккаунту и привычкам.
---
Модель привычки: 
- *пользователь* - создатель привычки
- *место* - место, в котором необходимо выполнять привычку
- *время -* время, когда необходимо выполнять привычку
- *действие -* действие, которое представляет из себя привычка
- *признак приятной привычки* - привычка, которую можно привязать к выполнению полезной привычки
- *связанная привычка -* привычка, которая связана с другой привычкой, важно указывать для полезных привычек, но не для приятных
- *периодичность* (по умолчанию ежедневная) - периодичность выполнения привычки для напоминания в днях
- *вознаграждение -* чем пользователь должен себя вознаградить после выполнения
- *время на выполнение -* время, которое предположительно потратит пользователь на выполнение привычки
- *признак публичности -* привычки можно публиковать в общий доступ, чтобы другие пользователи могли брать в пример чужие привычки

---
### Валидаторы

- исключить одновременный выбор связанной привычки и указания вознаграждения
- время выполнения должно быть не больше 120 секунд
- нельзя, чтобы связанная привычка и вознаграждение были одновременно пустые
- в связанные привычки могут попадать только привычки с признаком приятной привычки
- у приятной привычки не может быть вознаграждения или связанной привычки
- периодичность не может быть более 7 дней, то есть привычку нельзя выполнять больше, чем раз в неделю

### Права доступа

- каждый пользователь имеет доступ только к своим привычкам по механизму CRUD
- также пользователь может видеть список публичных привычек без возможности их как-то редактировать или удалять

### Эндпоинты

- регистрация
- авторизация
- список моих привычек
- список публичных привычек
- создание привычки
- редактирование привычки
- удаление привычки
---
### В приложении предусмотрены две отложенные задачи:
- Проверка новых пользователей раз в 30 секунд, которые подписались на telegram-бота. Для добавления задачи нужно выполнить команду "python3 manage.py set_tasks" (Если проект запускается через виртуальное окружение)
- Второй тип задач добавляется в БД автоматически при создании новой привычки и отправляет уведомление в telegram в указанное в привычке время

Команда для запуска: celery -A config worker --beat --scheduler django --loglevel=info (Если проект запускается через виртуальное окружение)

---
######
- По адресу your_server/swagger/ доступна документация
